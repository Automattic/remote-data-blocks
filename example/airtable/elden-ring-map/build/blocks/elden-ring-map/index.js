(()=>{"use strict";var e={20:(e,t,r)=>{var o=r(609),n=Symbol.for("react.element"),s=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),a=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};t.jsx=function(e,t,r){var o,c={},i=null,p=null;for(o in void 0!==r&&(i=""+r),void 0!==t.key&&(i=""+t.key),void 0!==t.ref&&(p=t.ref),t)s.call(t,o)&&!l.hasOwnProperty(o)&&(c[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===c[o]&&(c[o]=t[o]);return{$$typeof:n,type:e,key:i,ref:p,props:c,_owner:a.current}}},848:(e,t,r)=>{e.exports=r(20)},609:e=>{e.exports=window.React}},t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,r),s.exports}r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();const o=window.wp.blocks,n=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"remote-data-blocks/elden-ring-map","usesContext":["remote-data-blocks/remoteData"],"version":"0.1.0","title":"Elden Ring Map","category":"widgets","icon":"location-alt","description":"Elden Ring Map","example":{},"supports":{"html":false,"inserter":false,"interactivity":true},"textdomain":"remote-data-blocks","editorScript":["file:./index.js","leaflet-script"],"editorStyle":["leaflet-style"],"render":"file:./render.php","viewScriptModule":["file:./view.js","leaflet-script"]}'),s=window.wp.blockEditor,a=window.wp.element;var l=r(848);(0,o.registerBlockType)(n.name,{...n,edit:function({context:e}){const t=(0,s.useBlockProps)(),o=(0,s.useInnerBlocksProps)(t),n=(0,a.useRef)(),l=(0,a.useRef)(),c=(0,a.useRef)(),i=e["remote-data-blocks/remoteData"];(0,a.useEffect)((()=>{if(n.current){if(!l.current){const e=r.g.L.map(n.current).setView([i?.results[0].x,i?.results[0].y],25);r.g.L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:4}).addTo(e),e._handlers.forEach((e=>e.disable())),l.current=e,c.current=r.g.L.layerGroup().addTo(l.current)}c.current.clearLayers(),i?.results.forEach((e=>{r.g.L.marker([e.x,e.y]).addTo(c.current)})),l.current.flyTo([i?.results[0].x,i?.results[0].y])}}),[n.current,e]);const p=Boolean(i?.results);return React.createElement(React.Fragment,null,React.createElement(s.BlockControls,null),React.createElement("div",o,p?React.createElement("div",{ref:n,id:"map",style:{height:400}}):React.createElement("p",{style:{color:"red",padding:"20px"}},"This block only supports being rendered inside of an Elden Ring Map Query block.")))},save:function(){return(0,l.jsx)("p",Object.assign({},s.useBlockProps.save(),{children:(0,l.jsx)(s.InnerBlocks.Content,{})}))}})})();