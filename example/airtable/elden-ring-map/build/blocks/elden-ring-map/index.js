(()=>{"use strict";var e={20:(e,t,r)=>{var o=r(609),n=Symbol.for("react.element"),a=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),s=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};t.jsx=function(e,t,r){var o,i={},l=null,p=null;for(o in void 0!==r&&(l=""+r),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(p=t.ref),t)a.call(t,o)&&!c.hasOwnProperty(o)&&(i[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===i[o]&&(i[o]=t[o]);return{$$typeof:n,type:e,key:l,ref:p,props:i,_owner:s.current}}},848:(e,t,r)=>{e.exports=r(20)},609:e=>{e.exports=window.React}},t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,r),a.exports}r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();const o=window.wp.blocks,n=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"remote-data-blocks/elden-ring-map","usesContext":["remote-data-blocks/remoteData"],"version":"0.1.0","title":"Elden Ring Map","category":"widgets","icon":"location-alt","description":"Elden Ring Map","example":{},"supports":{"html":false,"inserter":false,"interactivity":true},"textdomain":"remote-data-blocks","editorScript":["file:./index.js","leaflet-script"],"editorStyle":["leaflet-style"],"render":"file:./render.php","viewScriptModule":["file:./view.js","leaflet-script"]}'),a=window.wp.blockEditor,s=window.wp.element;function c({coordinates:e}){const t=(0,s.useRef)(),o=(0,s.useRef)(),n=(0,s.useRef)();return(0,s.useEffect)((()=>{if(t.current){if(!o.current){const a=r.g.L.map(t.current).setView([e[0].x,e[0].y],25);r.g.L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:4}).addTo(a),a._handlers.forEach((e=>e.disable())),o.current=a,n.current=r.g.L.layerGroup().addTo(o.current)}n.current.clearLayers(),e.forEach((e=>{r.g.L.marker([e.x,e.y]).addTo(n.current)})),o.current.flyTo([e[0].x,e[0].y])}}),[e]),React.createElement("div",{ref:t,id:"map",style:{height:400}})}const i=window.wp.i18n;var l=r(848);(0,o.registerBlockType)(n.name,{...n,edit:function({context:e}){const t=(0,a.useBlockProps)(),r=(0,a.useInnerBlocksProps)(t),o=e["remote-data-blocks/remoteData"],n=o?.results||[];return o?React.createElement(React.Fragment,null,React.createElement(a.BlockControls,null),React.createElement("div",r,React.createElement(c,{coordinates:n}))):React.createElement("p",{style:{color:"red",padding:"20px"}},(0,i.__)("This block only supports being rendered inside of an Elden Ring Map Query block.","remote-data-blocks"))},save:function(){return(0,l.jsx)("p",Object.assign({},a.useBlockProps.save(),{children:(0,l.jsx)(a.InnerBlocks.Content,{})}))}})})();