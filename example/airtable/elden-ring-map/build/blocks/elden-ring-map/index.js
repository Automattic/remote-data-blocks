(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();const t=window.wp.blocks,r=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"remote-data-blocks/elden-ring-map","usesContext":["remote-data-blocks/remoteData"],"version":"0.1.0","title":"Elden Ring Map","category":"widgets","icon":"location-alt","description":"Elden Ring Map","example":{},"supports":{"html":false,"inserter":false},"textdomain":"remote-data-blocks","editorScript":["file:./index.js","leaflet-script"],"editorStyle":["leaflet-style"],"render":"file:./render.php","viewScript":["file:./view.js","leaflet-script"],"viewStyle":["leaflet-style"]}'),n=window.wp.blockEditor,o=window.wp.element;function a({coordinates:t}){const[r,n]=(0,o.useState)(),a=(0,o.useRef)(),s=(0,o.useRef)(),c=(0,o.useRef)();return(0,o.useEffect)((()=>{if(!t?.length)return;const r=setInterval((()=>{e.g.L&&(clearInterval(r),n(e.g.L))}),100);return()=>clearInterval(r)}),[t]),(0,o.useEffect)((()=>{if(a.current&&r){if(!s.current){const e=r.map(a.current).setView([t[0].x,t[0].y],25);r.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:4}).addTo(e),e._handlers.forEach((e=>e.disable())),s.current=e,c.current=r.layerGroup().addTo(s.current)}c.current.clearLayers(),t.forEach((e=>{r.marker([e.x,e.y]).addTo(c.current)})),s.current.flyTo([t[0].x,t[0].y])}}),[t,r]),React.createElement("div",{ref:a,id:"map",style:{height:400}})}const s=window.wp.i18n,c=window.ReactJSXRuntime;(0,t.registerBlockType)(r.name,{...r,edit:function({context:e}){const t=(0,n.useBlockProps)(),r=(0,n.useInnerBlocksProps)(t),o=e["remote-data-blocks/remoteData"],c=o?.results||[];return o?React.createElement(React.Fragment,null,React.createElement(n.BlockControls,null),React.createElement("div",r,React.createElement(a,{coordinates:c}))):React.createElement("p",{style:{color:"red",padding:"20px"}},(0,s.__)("This block only supports being rendered inside of an Elden Ring Map Query block.","remote-data-blocks"))},save:function(){return(0,c.jsx)("p",Object.assign({},n.useBlockProps.save(),{children:(0,c.jsx)(n.InnerBlocks.Content,{})}))}})})();